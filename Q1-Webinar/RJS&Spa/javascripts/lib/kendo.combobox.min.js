/*
* Kendo UI Complete v2013.1.307 (http://kendoui.com)
* Copyright 2013 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-complete-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
("function"==typeof define&&define.amd?define:function(e,t){return t()})(["./kendo.list.min"],function(){(function(e,t){var n=window.kendo,a=n.ui,s=a.List,o=a.Select,i=n.support,r=i.placeholder,l=n.keys,c=".kendoComboBox",u="click"+c,d="disabled",p="change",_="k-state-default",h="k-state-disabled",f="k-state-focused",g="mousedown"+c,v="aria-disabled",x="k-state-selected",m="filter",C="accept",y="rebind",w="mouseenter"+c+" mouseleave"+c,b=null,k=e.proxy,L=o.extend({init:function(t,a){var s,i,r=this;r.ns=c,a=e.isArray(a)?{dataSource:a}:a,o.fn.init.call(r,t,a),r._focusHandler=function(){r.input.focus()},a=r.options,t=r.element.on("focus"+c,r._focusHandler),a.placeholder=a.placeholder||t.attr("placeholder"),r._reset(),r._wrapper(),r._input(),r._tabindex(r.input),r._popup(),r._accessors(),r._dataSource(),r._ignoreCase(),r._enable(),r._cascade(),s=r._inputWrapper,r.input.on("keydown"+c,k(r._keydown,r)).on("focus"+c,function(){s.addClass(f),r._placeholder(!1)}).on("blur"+c,function(){s.removeClass(f),clearTimeout(r._typing),r.options.text!==r.input.val()&&r.text(r.text()),r._placeholder(),r._blur(),t.blur()}).attr({role:"combobox","aria-expanded":!1}),r._aria(),r._oldIndex=r.selectedIndex=-1,a.autoBind?r._filterSource():(i=a.text,!i&&r._isSelect&&(i=t.children(":selected").text()),i&&r.input.val(i)),i||r._placeholder(),n.notify(r)},options:{name:"ComboBox",enable:!0,index:-1,text:null,value:null,autoBind:!0,delay:200,dataTextField:"",dataValueField:"",minLength:0,height:200,highlightFirst:!0,template:"",filter:"none",placeholder:"",suggest:!1,ignoreCase:!0,animation:{}},events:["open","close",p,"select","dataBinding","dataBound","cascade"],setOptions:function(e){o.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria()},current:function(e){var n=this,a=n._current;return e===t?a:(a&&a.removeClass(x),o.fn.current.call(n,e),t)},destroy:function(){var e=this;e.input.off(c),e.element.off(c),e._inputWrapper.off(c),o.fn.destroy.call(e)},enable:function(e){var t=this,n=t.input.add(t.element),a=t._inputWrapper.off(w),s=t._arrow.parent().off(u+" "+g);e===!1?(a.removeClass(_).addClass(h),n.attr(d,d).attr(v,!0)):(a.removeClass(h).addClass(_).on(w,t._toggleHover),n.removeAttr(d).attr(v,!1),s.on(u,function(){t.toggle()}).on(g,function(e){e.preventDefault()}))},open:function(){var e=this,t=e.dataSource.options.serverFiltering;e.popup.visible()||(!e.ul[0].firstChild||e._state===C&&!t?(e._open=!0,e._state=y,e._filterSource()):(e.popup.open(),e._scroll(e._current)))},refresh:function(){var a,s,o,i=this,r=i.ul[0],l=i.options,c=i._state,u=i._data(),d=u.length;i.trigger("dataBinding"),r.innerHTML=n.render(i.template,u),i._height(d),i.popup.visible()&&i.popup._position(),i._isSelect&&(c===y&&(i._state="",a=i.value()),o=i._option,i._option=t,i._options(u),o&&o[0].selected&&i._custom(o.val())),d&&(l.highlightFirst&&i.current(e(r.firstChild)),l.suggest&&i.input.val()&&i._request!==t&&i.suggest(e(r.firstChild))),c===m||i._fetch||i._selectItem(),i._open&&(i._open=!1,s=!!d,i._typing&&i.input[0]!==document.activeElement&&(s=!1),i.toggle(s),i._typing=t),i._touchScroller&&i._touchScroller.reset(),i._makeUnselectable(),i._hideBusy(),i._bound=!0,i.trigger("dataBound")},search:function(e){e="string"==typeof e?e:this.text();var t=this,n=e.length,a=t.options,s=a.ignoreCase,o=a.filter,i=a.dataTextField;clearTimeout(t._typing),n>=a.minLength&&(t._state=m,"none"===o?t._filter(e):(t._open=!0,t._filterSource({value:s?e.toLowerCase():e,field:i,operator:o,ignoreCase:s})))},suggest:function(e){var n,a=this,o=a.input[0],i=a.text(),r=s.caret(o),c=a._last;return c==l.BACKSPACE||c==l.DELETE?(a._last=t,t):(e=e||"","string"!=typeof e&&(n=s.inArray(e[0],a.ul[0]),e=n>-1?a._text(a.dataSource.view()[n]):""),0>=r&&(r=i.toLowerCase().indexOf(e.toLowerCase())+1),e?(n=e.toLowerCase().indexOf(i.toLowerCase()),n>-1&&(i+=e.substring(n+i.length))):i=i.substring(0,r),i.length===r&&e||(o.value=i,s.selectText(o,r,i.length)),t)},text:function(e){e=null===e?"":e;var n,a=this,s=a._text,o=a.input[0],i=a.options.ignoreCase,r=e;return e===t?o.value:(n=a.dataItem(),n&&s(n)===e?(a._triggerCascade(),t):(i&&(r=r.toLowerCase()),a._select(function(e){return e=s(e),i&&(e=(e+"").toLowerCase()),e===r}),0>a.selectedIndex&&(a._custom(e),o.value=e),a._triggerCascade(),t))},toggle:function(e){var t=this;t._toggle(e)},value:function(e){var n,a=this;return e===t?a._accessor():(null!==e&&(e=""+e),a._selectedValue=e,!a._open&&e&&a._fetchItems(e)||(n=a._index(e),n>-1?a.select(n):(a.current(b),a._custom(e),a.text(e),a._placeholder()),a._prev=a._old=a._accessor(),a._oldIndex=a.selectedIndex),t)},_accept:function(e){var t=this;e?t._focus(e):(t.text(t.text()),t._change())},_custom:function(t){var n=this,a=n.element,s=n._option;n._state===m&&(n._state=C),n._isSelect?(s||(s=n._option=e("<option/>"),a.append(s)),s.text(t),s[0].selected=!0):a.val(t),n._selectedValue=t},_filter:function(e){var n=this,a=n.options,s=n.dataSource,o=a.ignoreCase,i=function(a){var s=n._text(a);return s!==t?(s+="",""!==s&&""===e?!1:(o&&(s=s.toLowerCase()),0===s.indexOf(e))):t};return o&&(e=e.toLowerCase()),n.ul[0].firstChild?(-1!==n._highlight(i)&&(a.suggest&&n._current&&n.suggest(n._current),n.open()),n._hideBusy(),t):(s.one(p,function(){s.data()[0]&&n.search(e)}).fetch(),t)},_highlight:function(n){var a,o=this;return n===t||null===n?-1:(n=o._get(n),a=s.inArray(n[0],o.ul[0]),-1==a&&(n=o.options.highlightFirst&&!o.text()?e(o.ul[0].firstChild):b),o.current(n),a)},_input:function(){var t,n=this,a=n.element.removeClass("k-input")[0],s=a.accessKey,o=n.wrapper,i="input.k-input",l=a.name||"";l&&(l='name="'+l+'_input" '),t=o.find(i),t[0]||(o.append('<span tabindex="-1" unselectable="on" class="k-dropdown-wrap k-state-default"><input '+l+'class="k-input" type="text" autocomplete="off"/><span tabindex="-1" unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(n.element),t=o.find(i)),t[0].style.cssText=a.style.cssText,a.maxLength>-1&&(t[0].maxLength=a.maxLength),t.addClass(a.className).val(a.value).css({width:"100%",height:a.style.height}).show(),r&&t.attr("placeholder",n.options.placeholder),s&&(a.accessKey="",t[0].accessKey=s),n._focused=n.input=t,n._inputWrapper=e(o[0].firstChild),n._arrow=o.find(".k-icon").attr({role:"button",tabIndex:-1}),a.id&&n._arrow.attr("aria-controls",n.ul[0].id)},_keydown:function(e){var t=this,n=e.keyCode;t._last=n,clearTimeout(t._typing),n==l.TAB||t._move(e)||t._search()},_placeholder:function(e){if(!r){var n,a=this,s=a.input,o=a.options.placeholder;if(o){if(n=a.value(),e===t&&(e=!n),s.toggleClass("k-readonly",e),!e){if(n)return;o=""}s.val(o)}}},_search:function(){var e=this;e._typing=setTimeout(function(){var t=e.text();e._prev!==t&&(e._prev=t,e.search(t))},e.options.delay)},_select:function(e){var n,a,s=this,o=s._data(),i=s._highlight(e);s.selectedIndex=i,-1!==i&&(s._state===m&&(s._state=C),s._current.addClass(x),o=o[i],n=s._text(o),a=s._value(o),s._prev=s.input[0].value=n,s._accessor(a!==t?a:n,i),s._selectedValue=s._accessor(),s._placeholder(),s._optionID&&s._current.attr("aria-selected",!0))},_wrapper:function(){var e=this,t=e.element,n=t.parent();n.is("span.k-widget")||(n=t.hide().wrap("<span />").parent(),n[0].style.cssText=t[0].style.cssText),e.wrapper=n.addClass("k-widget k-combobox k-header").addClass(t[0].className).css("display","")},_clearSelection:function(e,t){var n=this,a=e._selectedValue||e.value(),s=a&&-1===e.selectedIndex;(t||!a||s)&&n.value("")}});a.plugin(L)})(window.kendo.jQuery)});