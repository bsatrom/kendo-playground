/*
* Kendo UI Complete v2013.1.307 (http://kendoui.com)
* Copyright 2013 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-complete-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
("function"==typeof define&&define.amd?define:function(e,t){return t()})(["./kendo.popup.min"],function(){(function(e,t){function n(e,t){return e=e.split(" ")[!t+0]||e,e.replace("top","up").replace("bottom","down")}function i(e,t,n){e=e.split(" ")[!t+0]||e;var i={origin:["bottom",n?"right":"left"],position:["top",n?"right":"left"]},r=/left|right/.test(e);return r?(i.origin=["top",e],i.position[1]=l.directions[e].reverse):(i.origin[0]=e,i.position[0]=l.directions[e].reverse),i.origin=i.origin.join(" "),i.position=i.position.join(" "),i}function r(t,n){try{return e.contains(t,n)}catch(i){return!1}}function o(t){t=e(t),t.addClass("k-item").children(w).addClass(P),t.children("a").addClass(H).children(w).addClass(P),t.filter(":not([disabled])").addClass(B),t.filter(".k-separator:empty").append("&nbsp;"),t.filter("li[disabled]").addClass(N).removeAttr("disabled").attr("aria-disabled",!0),t.filter("[role]").length||t.attr("role","menuitem"),t.children("."+H).length||t.contents().filter(function(){return!(this.nodeName.match(C)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll("<span class='"+H+"'/>"),a(t),s(t)}function a(t){t=e(t),t.find("> .k-link > [class*=k-i-arrow]").remove(),t.filter(":has(.k-group)").children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var t=e(this),n=t.parent().parent();t.append("<span class='k-icon "+(n.hasClass(y+"-horizontal")?"k-i-arrow-s":"k-i-arrow-e")+"'/>")})}function s(t){t=e(t),t.filter(".k-first:not(:first-child)").removeClass(D),t.filter(".k-last:not(:last-child)").removeClass(I),t.filter(":first-child").addClass(D),t.filter(":last-child").addClass(I)}var l=window.kendo,c=l.ui,d=l.support.touch&&l.support.mobileOS,p=d||l.support.pointers,u=l.support.mousedown,m=l.support.click,f=e.extend,h=e.proxy,g=e.each,v=l.template,k=l.keys,_=c.Widget,C=/^(ul|a|div)$/i,b=".kendoMenu",w="img",x="open",y="k-menu",H="k-link",I="k-last",T="close",A="timer",D="k-first",P="k-image",O="select",R="zIndex",U="activate",E="deactivate",S=l.support.pointers?"MSPointerOver":"mouseenter",z=l.support.pointers?"MSPointerOut":"mouseleave",L="kendoPopup",B="k-state-default",G="k-state-hover",M="k-state-focused",N="k-state-disabled",W=".k-group",j=":not(.k-list) > .k-item",V=".k-item.k-state-disabled",q=".k-item:not(.k-state-disabled)",Z=".k-item:not(.k-state-disabled) > .k-link",$=":not(.k-item.k-separator)",F=$+":eq(0)",Q=$+":last",J="div:not(.k-animation-container,.k-list-container)",K={content:v("<div class='k-content k-group' tabindex='-1'>#= content(item) #</div>"),group:v("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>#= renderItems(data) #</ul>"),itemWrapper:v("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:v("<li class='#= wrapperCssClass(group, item) #' role='menuitem' #=item.items ? \"aria-haspopup='true'\": \"\"##=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:v("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:v("<span class='#= arrowClass(item, group) #'></span>"),sprite:v("<span class='k-sprite #= spriteCssClass #'></span>"),empty:v("")},X={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=t.enabled===!1?" k-state-disabled":" k-state-default",e.firstLevel&&0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),t.cssClass&&(n+=" "+t.cssClass),n},textClass:function(){return H},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e,t){var n="k-icon";return n+=t.horizontal?" k-i-arrow-s":" k-i-arrow-e"},text:function(e){return e.encoded===!1?e.text:l.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},groupAttributes:function(e){return e.expanded!==!0?" style='display:none'":""},groupCssClass:function(){return"k-group"},content:function(e){return e.content?e.content:"&nbsp;"}},Y=_.extend({init:function(t,n){var i=this;_.fn.init.call(i,t,n),t=i.wrapper=i.element,n=i.options,i._initData(n),i._updateClasses(),i._animations(n),i.nextItemZIndex=100,i._tabindex(),i._focusProxy=h(i._focusHandler,i),t.on("touchstart MSPointerDown",i._focusProxy).on(m+b,V,!1).on(m+b,q,h(i._click,i)).on("keydown"+b,h(i._keydown,i)).on("focus"+b,h(i._focus,i)).on("focus"+b,".k-content",h(i._focus,i)).on("blur"+b,h(i._removeHoverItem,i)).on(S+b,q,h(i._mouseenter,i)).on(z+b,q,h(i._mouseleave,i)).on(S+b+" "+z+b+" "+u+b+" "+m+b,Z,h(i._toggleHover,i)),n.openOnClick&&(i.clicked=!1,i._documentClickHandler=h(i._documentClick,i),e(document).click(i._documentClickHandler)),t.attr("role","menubar"),t[0].id&&(i._ariaId=l.format("{0}_mn_active",t[0].id)),l.notify(i)},events:[x,T,U,E,O],options:{name:"Menu",animation:{open:{duration:200},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:!1,closeOnClick:!0,hoverDelay:100},_initData:function(e){var t=this;e.dataSource&&(t.element.empty(),t.append(e.dataSource,t.element))},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=f(!0,t,e.animation),"dataSource"in e&&this._initData(e),_.fn.setOptions.call(this,e)},destroy:function(){var t=this;_.fn.destroy.call(t),t.element.off(b),t._documentClickHandler&&e(document).unbind("click",t._documentClickHandler)},enable:function(e,t){return this._toggleDisabled(e,t!==!1),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.length?t.find("> .k-group, > .k-animation-container > .k-group"):null);return g(n.items,function(){n.group.append(this),a(this)}),a(t),s(n.group.find(".k-first, .k-last").add(n.items)),this},insertBefore:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return g(n.items,function(){t.before(this),a(this),s(this)}),s(t),this},insertAfter:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return g(n.items,function(){t.after(this),a(this),s(this)}),s(t),this},_insert:function(t,n,i){var r,a,s,l,c=this;return n&&n.length||(i=c.element),s=e.isPlainObject(t),l={firstLevel:i.hasClass(y),horizontal:i.hasClass(y+"-horizontal"),expanded:!0,length:i.children().length},n&&!i.length&&(i=e(Y.renderGroup({group:l})).appendTo(n)),s||e.isArray(t)?r=e.map(s?[t]:t,function(t,n){return"string"==typeof t?e(t):e(Y.renderItem({group:l,item:f(t,{index:n})}))}):(r=e(t),a=r.find("> ul").addClass("k-group").attr("role","menu"),r=r.filter("li"),r.add(a.find("> li")).each(function(){o(this)})),{items:r,group:i}},remove:function(e){var t,n,i,r;return e=this.element.find(e),t=this,n=e.parentsUntil(t.element,j),i=e.parent("ul"),e.remove(),i&&!i.children(j).length&&(r=i.parent(".k-animation-container"),r.length?r.remove():i.remove()),n.length&&(n=n.eq(0),a(n),s(n)),t},open:function(r){var o=this,a=o.options,s="horizontal"==a.orientation,c=a.direction,d=l.support.isRtl(o.wrapper);return r=o.element.find(r),/^(top|bottom|default)$/.test(c)&&(c=d?s?(c+" left").replace("default","bottom"):"left":s?(c+" right").replace("default","bottom"):"right"),r.siblings().find(">.k-popup:visible,>.k-animation-container>.k-popup:visible").each(function(){var t=e(this).data("kendoPopup");t&&t.close()}),r.each(function(){var r=e(this);clearTimeout(r.data(A)),r.data(A,setTimeout(function(){var e,l,p,u,m,h,g=r.find(".k-group:first:hidden");g[0]&&o.trigger(x,{item:r[0]})===!1&&(r.data(R,r.css(R)),r.css(R,o.nextItemZIndex++),e=g.data(L),l=r.parent().hasClass(y),p=l&&s,u=i(c,l,d),m=a.animation.open.effects,h=m!==t?m:"slideIn:"+n(c,l),e?(e=g.data(L),e.options.origin=u.origin,e.options.position=u.position,e.options.animation.open.effects=h):e=g.kendoPopup({activate:function(){o.trigger(U,{item:this.wrapper.parent()})},deactivate:function(){o.trigger(E,{item:this.wrapper.parent()})},origin:u.origin,position:u.position,collision:a.popupCollision!==t?a.popupCollision:p?"fit":"fit flip",anchor:r,appendTo:r,animation:{open:f(!0,{effects:h},a.animation.open),close:a.animation.close},close:function(e){var t=e.sender.wrapper.parent();o.trigger(T,{item:t[0]})?e.preventDefault():(t.css(R,t.data(R)),t.removeData(R))}}).data(L),g.removeAttr("aria-hidden"),e.open())},o.options.hoverDelay))}),o},close:function(t){var n=this,i=n.element;return t=i.find(t),t.length||(t=i.find(">.k-item")),t.each(function(){var t=e(this);clearTimeout(t.data(A)),t.data(A,setTimeout(function(){var e=t.find(".k-group:first:visible").data(L);e&&(e.close(),e.element.attr("aria-hidden",!0))},n.options.hoverDelay))}),n},_toggleDisabled:function(t,n){this.element.find(t).each(function(){e(this).toggleClass(B,n).toggleClass(N,!n).attr("aria-disabled",!n)})},_toggleHover:function(t){var n=e(l.eventTarget(t)||t.target).closest(j),i=t.type==S||-1!==u.indexOf(t.type);n.parents("li."+N).length||n.toggleClass(G,i),this._removeHoverItem()},_removeHoverItem:function(){var e=this._hoverItem();e&&e.hasClass(M)&&(e.removeClass(M),this._oldHoverItem=null)},_updateClasses:function(){var e,t=this.element;t.addClass("k-widget k-reset k-header "+y).addClass(y+"-"+this.options.orientation),t.find("li > ul").addClass("k-group").attr("role","menu").attr("aria-hidden",t.is(":visible")).end().find("li > div").addClass("k-content").attr("tabindex","-1"),e=t.find("> li,.k-group > li"),e.each(function(){o(this)})},_mouseenter:function(t){var n=this,i=e(t.currentTarget),o=i.children(".k-animation-container").length||i.children(W).length;t.delegateTarget==i.parents(".k-menu")[0]&&((!n.options.openOnClick||n.clicked)&&!r(t.currentTarget,t.relatedTarget)&&o&&n.open(i),(n.options.openOnClick&&n.clicked||p)&&i.siblings().each(h(function(e,t){n.close(t)},n)))},_mouseleave:function(n){var i=this,o=e(n.currentTarget),a=o.children(".k-animation-container").length||o.children(W).length;return o.parentsUntil(".k-animation-container",".k-list-container,.k-calendar-container")[0]?(n.stopImmediatePropagation(),t):(i.options.openOnClick||d||l.support.pointers&&2==n.originalEvent.pointerType||r(n.currentTarget,n.relatedTarget)||!a||i.close(o),t)},_click:function(n){var i,r,o,a=this,s=a.options,c=e(l.eventTarget(n)),d=c[0]?c[0].nodeName.toUpperCase():"",p="INPUT"==d||"SELECT"==d||"BUTTON"==d,u=c.closest("."+H),m=c.closest(j),f=u.attr("href"),h=!!f&&"#"!=f.charAt(f.length-1);if(!m.children(J)[0])return m.hasClass(N)?(n.preventDefault(),t):(n.handled||!a.trigger(O,{item:m[0]})||p||n.preventDefault(),n.handled=!0,r=m.children(W+",.k-animation-container"),o=r.is(":visible"),s.closeOnClick&&!h&&(!r.length||s.openOnClick&&o)?(m.removeClass(G).css("height"),a._oldHoverItem=a._findRootParent(m),a.close(u.parentsUntil(a.element,j)),a.clicked=!1,-1!="touchend MSPointerUp".indexOf(n.type)&&n.preventDefault(),t):((m.parent().hasClass(y)&&s.openOnClick||l.support.touch)&&(h||p||n.preventDefault(),a.clicked=!0,i=r.is(":visible")?T:x,a[i](m)),t))},_documentClick:function(e){r(this.element[0],e.target)||(this.clicked=!1)},_focus:function(n){var i,r=this,o=n.target,a=r._hoverItem();if(o!=r.wrapper[0]&&!e(o).is(":focusable"))return n.stopPropagation(),e(o).closest(".k-content").closest(".k-group").closest(".k-item").addClass(M),r.wrapper.focus(),t;try{i=document.activeElement}catch(s){}o==r.wrapper[0]&&a.length?r._moveHover([],a):o!=r.wrapper[0]||r._oldHoverItem||i==r.wrapper[0]||r._moveHover([],r.wrapper.children().first())},_keydown:function(e){var n,i,r,o=this,a=e.keyCode,s=o._oldHoverItem,c=l.support.isRtl(o.wrapper);if(e.target==e.currentTarget||a==k.ESC){if(s||(s=o._oldHoverItem=o._hoverItem()),i=o._itemBelongsToVertival(s),r=o._itemHasChildren(s),a==k.RIGHT)n=o[c?"_itemLeft":"_itemRight"](s,i,r);else if(a==k.LEFT)n=o[c?"_itemRight":"_itemLeft"](s,i,r);else if(a==k.DOWN)n=o._itemDown(s,i,r);else if(a==k.UP)n=o._itemUp(s,i,r);else if(a==k.ESC)n=o._itemEsc(s,i);else if(a==k.ENTER||a==k.SPACEBAR)n=s.children(".k-link"),n.length>0&&(o._click({target:n[0],preventDefault:function(){}}),o._moveHover(s,o._findRootParent(s)));else if(a==k.TAB)return n=o._findRootParent(s),o.close(n),o._moveHover(s,n),t;n&&n[0]&&(e.preventDefault(),e.stopPropagation())}},_hoverItem:function(){return this.wrapper.find(".k-item.k-state-hover,.k-item.k-state-focused").filter(":visible")},_itemBelongsToVertival:function(e){var t=this.wrapper.hasClass("k-menu-vertical");return e.length?e.parent().hasClass("k-group")||t:t},_itemHasChildren:function(e){return e.length?e.children("ul.k-group, div.k-animation-container").length>0:!1},_moveHover:function(e,t){var n=this,i=n._ariaId;e.length&&t.length&&(e.removeClass(M),e[0].id===i&&e.removeAttr("id")),t.length&&(t[0].id&&(i=t[0].id),t.addClass(M),n._oldHoverItem=t,i&&(n.element.removeAttr("aria-activedescendant"),t.attr("id",i),n.element.attr("aria-activedescendant",i)))},_findRootParent:function(e){return e.parent().hasClass("k-menu")?e:e.parentsUntil(".k-menu","li.k-item").last()},_isRootItem:function(e){return e.parent().hasClass("k-menu")},_itemRight:function(e,t,n){var i,r,o=this;return t?n?(o.open(e),i=e.find(".k-group").children().first()):"horizontal"==o.options.orientation&&(r=o._findRootParent(e),o.close(r),i=r.nextAll(F)):(i=e.nextAll(F),i.length||(i=e.prevAll(Q))),i&&!i.length?i=o.wrapper.children(".k-item").first():i||(i=[]),o._moveHover(e,i),i},_itemLeft:function(e,t){var n,i=this;return t?(n=e.parent().closest(".k-item"),i.close(n),i._isRootItem(n)&&"horizontal"==i.options.orientation&&(n=n.prevAll(F))):(n=e.prevAll(F),n.length||(n=e.nextAll(Q))),n.length||(n=i.wrapper.children(".k-item").last()),i._moveHover(e,n),n},_itemDown:function(e,t,n){var i,r=this;if(t)i=e.nextAll(F);else{if(!n||e.hasClass(N))return;r.open(e),i=e.find(".k-group").children().first()}return!i.length&&e.length?i=e.parent().children().first():e.length||(i=r.wrapper.children(".k-item").first()),r._moveHover(e,i),i},_itemUp:function(e,t){var n,i=this;if(t)return n=e.prevAll(F),!n.length&&e.length?n=e.parent().children().last():e.length||(n=i.wrapper.children(".k-item").last()),i._moveHover(e,n),n},_itemEsc:function(e,t){var n,i=this;return t?(n=e.parent().closest(".k-item"),i.close(n),i._moveHover(e,n),n):e},_focusHandler:function(t){var n=this,i=e(l.eventTarget(t)).closest(j);setTimeout(function(){n._moveHover([],i),i.children(".k-content")[0]&&i.parent().closest(".k-item").removeClass(M)},200)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{hide:!0,effects:{}}})}});f(Y,{renderItem:function(e){e=f({menu:{},group:{}},e);var t=K.empty,n=e.item;return K.item(f(e,{image:n.imageUrl?K.image:t,sprite:n.spriteCssClass?K.sprite:t,itemWrapper:K.itemWrapper,renderContent:Y.renderContent,arrow:n.items||n.content?K.arrow:t,subGroup:Y.renderGroup},X))},renderGroup:function(e){return K.group(f({renderItems:function(e){for(var t="",n=0,i=e.items,r=i?i.length:0,o=f({length:r},e.group);r>n;n++)t+=Y.renderItem(f(e,{group:o,item:f({index:n},i[n])}));return t}},e,X))},renderContent:function(e){return K.content(f(e,X))}}),l.ui.plugin(Y)})(window.kendo.jQuery)});